(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={galleryItem:"ImageGalleryItem_galleryItem__T8wEJ",galleryItemImg:"ImageGalleryItem_galleryItemImg__2C2iy"}},12:function(e,t,a){e.exports={overlay:"Modal_overlay__2hOYT",modal:"Modal_modal__1XOEx"}},14:function(e,t,a){e.exports={container:"Container_container__1WSV8"}},16:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__2G1DK"}},17:function(e,t,a){e.exports={button:"Button_button__bh7Lf"}},22:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),c=a.n(o),i=(a(22),a(23),a(24),a(13)),s=a(4),l=a(5),u=a(7),h=a(6),m=a(9),d=a(14),g=a.n(d),b=a(1),f=function(e){var t=e.children;return Object(b.jsx)("div",{className:g.a.container,children:t})},j=a(15),y=a.n(j);var p={fetchImg:function(e,t){var a="".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(t,"&per_page=").concat(12,"&key=").concat("24011086-928385de9f6ca9cb6056973c7");return fetch(a).then((function(e){return e.json()})).then((function(e){return e}))}},v=a(8),O=a.n(v),_=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleChange=function(t){e.setState({query:t.currentTarget.value})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.query.trim()?(e.props.onSubmit(e.state.query),e.setState({query:""})):m.b.error("Enter query!")},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(b.jsx)("header",{className:O.a.searchbar,children:Object(b.jsxs)("form",{className:O.a.form,onSubmit:this.handleSubmit,children:[Object(b.jsxs)("button",{type:"submit",className:O.a.searchButton,children:[Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(b.jsx)("path",{d:"M9.145 18.29c-5.042 0-9.145-4.102-9.145-9.145s4.103-9.145 9.145-9.145 9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321 0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"})}),Object(b.jsx)("span",{className:O.a.searchButtonLabel,children:"Search"})]}),Object(b.jsx)("input",{className:O.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query,onChange:this.handleChange})]})})}}]),a}(n.Component),x=a(16),C=a.n(x),k=a(11),w=a.n(k),I=function(e){var t=e.src,a=e.alt,n=e.largeImageURL,r=e.onClick;return Object(b.jsx)("li",{className:w.a.galleryItem,children:Object(b.jsx)("img",{className:w.a.galleryItemImg,src:t,alt:a,onClick:function(){return r(n,a)}})})},S=function(e){var t=e.images,a=e.onClickImg;return Object(b.jsx)("ul",{className:C.a.gallery,id:"gallery",children:t&&t.map((function(e){var t=e.id,n=e.webformatURL,r=e.largeImageURL,o=e.tags;return Object(b.jsx)(I,{src:n,largeImageURL:r,alt:o,onClick:a},t)}))})},L=a(12),M=a.n(L),N=document.querySelector("#modal-root"),B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&(e.props.onClose(),console.log(t))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.alt;return Object(o.createPortal)(Object(b.jsx)("div",{className:M.a.overlay,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:M.a.modal,children:Object(b.jsx)("img",{src:t,alt:a})})}),N)}}]),a}(n.Component),q=a(17),D=a.n(q),P=function(e){var t=e.onClickLoadMore;return Object(b.jsx)("button",{type:"button",className:D.a.button,onClick:t,children:"Load more"})},U=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],currentPage:1,searchQuery:"",isLoading:!1,error:null,showModal:!1,modalImg:"",alt:""},e.fetchImg=function(){var t=e.state,a=t.currentPage,n=t.searchQuery;e.setState({isLoading:!0}),p.fetchImg(n,a).then((function(t){if(0===t.total)return m.b.error("Not found!");e.setState((function(e){return{images:[].concat(Object(i.a)(e.images),Object(i.a)(t.hits))}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){e.setState({isLoading:!1}),setTimeout((function(){document.querySelector("#gallery").scrollIntoView({behavior:"smooth",block:"end"})}),1e3)}))},e.onClickLoadMore=function(){e.setState((function(e){return{currentPage:e.currentPage+1}}))},e.onChangeQuery=function(t){e.setState({images:[],currentPage:1,searchQuery:t,error:null})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.onClickImg=function(t,a){e.setState({showModal:!0,modalImg:t,alt:a})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery===this.state.searchQuery&&t.currentPage===this.state.currentPage||this.fetchImg()}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.isLoading,n=e.showModal,r=e.modalImg,o=e.alt;return Object(b.jsxs)(f,{children:[Object(b.jsx)(_,{onSubmit:this.onChangeQuery}),Object(b.jsx)(m.a,{autoClose:3e3,theme:"dark"}),a&&Object(b.jsx)(y.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,timeout:3e3}),Object(b.jsx)(S,{images:t,onClickImg:this.onClickImg}),t.length>0&&Object(b.jsx)(P,{onClickLoadMore:this.onClickLoadMore}),n&&Object(b.jsx)(B,{src:r,alt:o,onClose:this.toggleModal})]})}}]),a}(n.Component),E=U;c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3lCMm",form:"Searchbar_form__JUtkU",searchButton:"Searchbar_searchButton__3iqxz",searchButtonLabel:"Searchbar_searchButtonLabel__3GCl6",input:"Searchbar_input__32Gf_"}}},[[46,1,2]]]);
//# sourceMappingURL=main.5bc42756.chunk.js.map
{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Container/Container.js","api/pixabey-api.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","helpers/mapper.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Container","children","className","s","container","api","fetchImg","searchQuery","page","url","fetch","then","response","json","data","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","searchbar","form","this","type","searchButton","xmlns","width","height","viewBox","d","searchButtonLabel","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","src","alt","largeImageURL","onClick","galleryItem","galleryItemImg","ImageGallery","images","onClickImg","gallery","id","map","webformatURL","tags","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","console","log","window","addEventListener","removeEventListener","createPortal","overlay","modal","Button","onClickLoadMore","button","mapper","App","currentPage","isLoading","showModal","modalImg","imgApi","total","prevState","hits","setTimeout","scrollIntoView","behavior","block","catch","finally","onChangeQuery","toggleModal","img","prevProps","PrevState","autoClose","theme","length","color","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3c7720ba.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"galleryItem\":\"ImageGalleryItem_galleryItem__T8wEJ\",\"galleryItemImg\":\"ImageGalleryItem_galleryItemImg__2C2iy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2hOYT\",\"modal\":\"Modal_modal__1XOEx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__1WSV8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__2G1DK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__bh7Lf\"};","import s from './Container.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const Container = ({children}) => {\r\n    return (\r\n        <div className={s.container}>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nContainer.propTypes = {\r\n   children: PropTypes.node.isRequired,\r\n}","\r\nfunction fetchImg (searchQuery, page) {\r\n    \r\n    const API_KEY = '24011086-928385de9f6ca9cb6056973c7';\r\n    const BASE_URL = 'https://pixabay.com/api/';\r\n    const per_page = 12;\r\n    \r\n    let url= `${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=${per_page}&key=${API_KEY}`;\r\n    \r\n  return fetch(url)\r\n    .then(response =>response.json()) \r\n      .then(data=> data)\r\n}\r\nconst api = {\r\n  fetchImg,\r\n};\r\nexport default api;","import React, { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default class Searchbar extends Component {\r\n\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n  \r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      query: e.currentTarget.value\r\n        });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (this.state.query.trim() === '') {\r\n      toast.error('Enter query!');\r\n      return;\r\n    }\r\n\r\n        this.props.onSubmit(this.state.query);\r\n        this.setState({ query: '' });\r\n    };\r\n  \r\n  render() {\r\n      return (\r\n      <header className={s.searchbar}>\r\n        <form className={s.form} onSubmit={this.handleSubmit}>\r\n            <button type=\"submit\" className={s.searchButton}>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M9.145 18.29c-5.042 0-9.145-4.102-9.145-9.145s4.103-9.145 9.145-9.145 9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321 0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z\"/></svg>\r\n              <span className={s.searchButtonLabel}>Search</span>\r\n            </button>\r\n            <input\r\n              className={s.input}\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              autoFocus\r\n              placeholder=\"Search images and photos\"\r\n              value={this.state.query}\r\n              onChange={this.handleChange}\r\n            />\r\n          </form>\r\n      </header>  \r\n    )\r\n    }\r\n}\r\n\r\n","import s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const ImageGalleryItem = ({ src, alt, largeImageURL, onClick }) => {\r\n    return (\r\n        <li className={s.galleryItem}>\r\n            <img className={s.galleryItemImg } src={src} alt={alt} onClick={()=>onClick(largeImageURL, alt)}/>\r\n        </li>\r\n    )\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n    src: PropTypes.string.isRequired,\r\n    largeImageURL: PropTypes.string.isRequired,\r\n    alt: PropTypes.string.isRequired,\r\n    onClick: PropTypes.func.isRequired,\r\n}\r\n","import s from './ImageGallery.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { ImageGalleryItem } from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nexport const ImageGallery = ({images, onClickImg}) => {\r\n    return (\r\n        <ul className={s.gallery} id='gallery'>\r\n            {images && images.map(({ id, webformatURL, largeImageURL, tags }) => (\r\n                <ImageGalleryItem key={id} src={webformatURL} largeImageURL={largeImageURL} alt={tags} onClick={ onClickImg}/>  \r\n            ))}   \r\n        </ul>\r\n    )\r\n}\r\n\r\nImageGallery.propTypes = {\r\n     images: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            id: PropTypes.number.isRequired,\r\n            webformatURL: PropTypes.string.isRequired,\r\n            largeImageURL: PropTypes.string.isRequired,\r\n            tags: PropTypes.string.isRequired,\r\n        }).isRequired,\r\n    ),\r\n    onClickImg: PropTypes.func.isRequired,\r\n }","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport s from './Modal.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component{\r\n    \r\n    static propTypes = {\r\n    src: PropTypes.string.isRequired,\r\n    alt: PropTypes.string.isRequired,\r\n    onClose: PropTypes.func.isRequired,\r\n    }\r\n    \r\n    componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n    \r\n    componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n    \r\n    handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n    };\r\n    \r\n    handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n        this.props.onClose();\r\n        console.log(event)\r\n    }\r\n  };\r\n\r\n    render() {\r\n        const { src, alt } = this.props;\r\n\r\n        return createPortal (\r\n            <div className={s.overlay} onClick={this.handleBackdropClick}>\r\n                <div className={s.modal}>\r\n                    <img src={src} alt={alt} />\r\n                </div>\r\n            </div>,\r\n            modalRoot,\r\n        );\r\n    }\r\n}\r\n\r\n","import s from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const Button = ({ onClickLoadMore }) => {\r\n    return (\r\n        <button type=\"button\" className={s.button} onClick={onClickLoadMore}>Load more</button>\r\n    )\r\n}\r\n\r\nButton.propTypes = {\r\n    onClickLoadMore: PropTypes.func.isRequired,\r\n}","export const mapper = (images) => {\r\n    return images.map(({id, webformatURL, largeImageURL, tags })=>({id, webformatURL, largeImageURL, tags}))\r\n}","import React, { Component } from 'react';\nimport { toast, ToastContainer } from 'react-toastify';\n\nimport { Container } from './components/Container/Container';\nimport Loader from \"react-loader-spinner\";\nimport  imgApi from './api/pixabey-api';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport  {ImageGallery}  from './components/ImageGallery/ImageGallery';\nimport Modal from './components/Modal/Modal';\nimport { Button } from './components/Button/Button';\nimport { mapper } from './helpers/mapper';\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: '',\n    isLoading: false,\n    error: null,\n    showModal: false,\n    modalImg: '',\n    alt: '',\n  };\n  \n  componentDidUpdate(prevProps, PrevState) {\n    if (PrevState.searchQuery !== this.state.searchQuery || PrevState.currentPage !==this.state.currentPage) {\n      this.fetchImg();\n    }\n  }\n\n  fetchImg = () => {\n    const { currentPage, searchQuery } = this.state;\n\n    this.setState({ isLoading: true });\n    \n    imgApi\n      .fetchImg(searchQuery, currentPage)\n      .then(images => {\n        if (images.total === 0) {\n          return toast.error('Not found!')\n        }\n        \n        this.setState(prevState => ({\n          images: [...prevState.images, ...mapper(images.hits)],\n        }));\n\n        setTimeout(() => {\n          document.querySelector('#gallery').scrollIntoView({\n            behavior: 'smooth', block: 'end',\n          });\n        }, 1000)\n      })\n    .catch(error => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n\n  }\n\n  onClickLoadMore = () => {\n    this.setState(prevState => ({\n          currentPage: prevState.currentPage + 1,\n        }));\n  };\n\n  onChangeQuery = (query) => {\n    this.setState({\n      images: [],\n      currentPage: 1,\n      searchQuery: query,\n      error: null,\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n    }\n\n  onClickImg = (img, alt) => {\n    this.setState({\n      showModal: true,\n      modalImg: img,\n      alt: alt,\n    })\n  }\n\n\n  render() {\n    const { images, isLoading, showModal, modalImg, alt } = this.state;\n\n    return (\n      <Container>\n        <Searchbar onSubmit={this.onChangeQuery} />\n        <ToastContainer autoClose={3000} theme={ 'dark'}/>\n\n        {images.length>0 && <ImageGallery images={images} onClickImg={this.onClickImg} />}\n\n        {isLoading && <Loader\n          type=\"ThreeDots\"\n          color=\"#00BFFF\"\n          height={80}\n          width={80}\n          timeout={3000} \n      />}\n\n        {images.length > 11 && <Button onClickLoadMore={this.onClickLoadMore} />}\n        \n        {showModal && (\n          <Modal src={modalImg } alt={alt} onClose={ this.toggleModal}/>\n        )}\n      </Container>\n  );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3lCMm\",\"form\":\"Searchbar_form__JUtkU\",\"searchButton\":\"Searchbar_searchButton__3iqxz\",\"searchButtonLabel\":\"Searchbar_searchButtonLabel__3GCl6\",\"input\":\"Searchbar_input__32Gf_\"};"],"sourceRoot":""}